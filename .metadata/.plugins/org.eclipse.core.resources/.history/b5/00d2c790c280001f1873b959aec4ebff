package vn.iotstar.controllers.admin;

import java.io.IOException;
import java.util.List;

import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import vn.iotstar.models.CategoryModel;
import vn.iotstar.services.ICategoryService;
import vn.iotstar.services.impl.CategoryServiceImpl;

@WebServlet(urlPatterns = {"/admin/categories", "/admin/category/add", "/admin/category/insert"})
public class CategoryController extends HttpServlet{

	private static final long serialVersionUID = 1L;
	public ICategoryService cateService = new CategoryServiceImpl();
	
	@Override
	protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
		String url = req.getRequestURI();
		req.setCharacterEncoding("UTF-8");
		resp.setCharacterEncoding("UTF-8");
		if(url.contains("categories")) {
			List<CategoryModel> list = cateService.findAll();
			req.setAttribute("listcate", list);
			req.getRequestDispatcher("/views/admin/category-list.jsp").forward(req, resp);
		}else if(url.contains("add")) {
			req.getRequestDispatcher("/views/admin/category-add.jsp").forward(req, resp);
		}
	}
	
	@Override
	protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
		String url = req.getRequestURI();
		req.setCharacterEncoding("UTF-8");
		resp.setCharacterEncoding("UTF-8");
		if(url.contains("insert")) {
			String categoryname = req.getParameter("categoryname");
			String images = "data:image/jpeg;base64,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";
			int status = Integer.parseInt(req.getParameter("status"));
			CategoryModel category = new CategoryModel();
			category.setCategoryname(categoryname);
			category.setImages(images);
			category.setStatus(status);
			cateService.insert(category);
		}
	}
}
